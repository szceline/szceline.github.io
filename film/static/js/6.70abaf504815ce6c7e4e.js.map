{"version":3,"sources":["webpack:///src/components/City.vue","webpack:///./src/components/City.vue?e6e6","webpack:///./src/components/City.vue"],"names":["components_City","render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","_v","_l","item","key","id","_s","nm","index","itemList","on","touchstart","$event","handleToIndex","staticRenderFns","Component","__webpack_require__","normalizeComponent","name","data","cityList","hotList","isLoading","mounted","_this","$axios","get","then","res","msg","cities","_formatCityList","formatCityList","methods","i","length","isHot","push","firstLetter","py","substring","toUpperCase","toCom","list","j","sort","n1","n2","h2","$refs","city_sort","getElementsByTagName","city_list","toScrollTop","offsetTop","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/6.70abaf504815ce6c7e4e.js","sourcesContent":["<template>\n    <div class=\"city_body \">\n        <div class=\"city_list\">\n            <Loading v-if =\"isLoading\"/>\n            <Scroller v-else ref=\"city_list\">\n                <div>\n                    <div class=\"city_hot\">\n                        <h2>热门城市</h2>\n                        <ul class=\"clearfix\">\n                            <li v-for=\"item in hotList\" :key=\"item.id\" >{{ item.nm }}</li>\n                        </ul>\n                    </div>\n                    <div class=\"city_sort\" ref=\"city_sort\">\n                        <div v-for=\"item in cityList\" :key=\"item.index\">\n                            <h2>{{ item.index }}</h2>\n                            <ul>\n                                <li v-for=\"itemList in item.list\" :key=\"itemList.id\" >{{ itemList.nm }}</li>\n                            </ul>\n                        </div>\t\n                    </div>\n                </div>\n            </Scroller>\n        </div>\n        <div class=\"city_index\">\n            <ul>\n                <li v-for=\"(item,index) in cityList\" :key=\"item.index\" @touchstart=\"handleToIndex(index)\">{{ item.index }}</li>\n            </ul>\n        </div>\n    </div>\n</template>\n<script>\n    export default {\n        name:'city',\n        data(){\n            return {\n                cityList:[],\n                hotList:[],\n                isLoading:true\n            }\n        },\n        mounted(){\n            this.$axios.get('/api/cityList').then((res) =>{\n                var msg =res.data.msg;\n                if(msg === 'ok'){\n                    this.isLoading =false;\n                    var cities= res.data.data.cities;\n                    var {cityList ,hotList} =this.formatCityList(cities);\n                    this.cityList =cityList;\n                    this.hotList =hotList;\n                   \n                }\n               \n            });\n        },\n        methods:{\n            formatCityList(cities){\n                var cityList = [];\n                var hotList = [];\n\n                for(var i=0;i<cities.length;i++){\n                    if(cities[i].isHot ===1){\n                        hotList.push(cities[i]);\n                    }\n                }\n                for(var i=0;i<cities.length;i++){\n                    var firstLetter = cities[i].py.substring(0,1).toUpperCase();\n                    if(toCom(firstLetter)){\n                        cityList.push({\n                            index : firstLetter,\n                            list:[{\n                                nm:cities[i].nm,\n                                id:cities[i].id\n                            }]\n                        });\n                    }else{\n                        for(var j=0;j<cityList.length;j++){\n                            if(cityList[j].index === firstLetter){\n                                cityList[j].list.push({\n                                    nm :cities[i].nm,\n                                    id: cities[i].id\n                                });\n                            }\n                        }\n                    }\n                }\n                cityList.sort((n1,n2)=>{\n                    if(n1.index>n2.index){\n                        return 1;\n                    }else if(n1.index<n2.index){\n                        return -1;\n                    }else{\n                        return 0;\n                    }\n                });\n                function toCom(firstLetter){\n                    for(var i =0;i<cityList.length;i++){\n                        if(cityList[i].index === firstLetter){\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n                return{\n                    cityList,\n                    hotList\n                };\n            },\n            \n            handleToIndex(index){\n                var h2 = this.$refs.city_sort.getElementsByTagName('h2');\n                //this.$refs.city_sort.parentNode.scrollTop = h2[index].offsetTop;\n                this.$refs.city_list.toScrollTop(-h2[index].offsetTop);\n            },\n        \n        }\n    }\n</script>\n<style scoped>\n#content .city_body{ margin-top: 45px; display: flex; width:100%; position: absolute; top: 0; bottom: 0;}\n.city_body .city_list{ flex:1; overflow: auto; background: #FFF5F0;}\n.city_body .city_list::-webkit-scrollbar{background-color:transparent;width:0;}\n.city_body .city_hot{ margin-top: 20px;}\n.city_body .city_hot h2{ padding-left: 15px; line-height: 30px; font-size: 14px; background:#F0F0F0; font-weight: normal;}\n.city_body .city_hot ul li{ float: left; background: #fff; width: 29%; height: 33px; margin-top: 15px; margin-left: 3%; padding: 0 4px; border: 1px solid #e6e6e6; border-radius: 3px; line-height: 33px; text-align: center; box-sizing: border-box;}\n.city_body .city_sort div{ margin-top: 20px;}\n.city_body .city_sort h2{ padding-left: 15px; line-height: 30px; font-size: 14px; background:#F0F0F0; font-weight: normal;}\n.city_body .city_sort ul{ padding-left: 10px; margin-top: 10px;}\n.city_body .city_sort ul li{ line-height: 30px; line-height: 30px;}\n.city_body .city_index{ width:20px; display: flex; flex-direction:column; justify-content:center; text-align: center; border-left:1px #e6e6e6 solid;\n}\n\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/City.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"city_body \"},[_c('div',{staticClass:\"city_list\"},[(_vm.isLoading)?_c('Loading'):_c('Scroller',{ref:\"city_list\"},[_c('div',[_c('div',{staticClass:\"city_hot\"},[_c('h2',[_vm._v(\"热门城市\")]),_vm._v(\" \"),_c('ul',{staticClass:\"clearfix\"},_vm._l((_vm.hotList),function(item){return _c('li',{key:item.id},[_vm._v(_vm._s(item.nm))])}),0)]),_vm._v(\" \"),_c('div',{ref:\"city_sort\",staticClass:\"city_sort\"},_vm._l((_vm.cityList),function(item){return _c('div',{key:item.index},[_c('h2',[_vm._v(_vm._s(item.index))]),_vm._v(\" \"),_c('ul',_vm._l((item.list),function(itemList){return _c('li',{key:itemList.id},[_vm._v(_vm._s(itemList.nm))])}),0)])}),0)])])],1),_vm._v(\" \"),_c('div',{staticClass:\"city_index\"},[_c('ul',_vm._l((_vm.cityList),function(item,index){return _c('li',{key:item.index,on:{\"touchstart\":function($event){return _vm.handleToIndex(index)}}},[_vm._v(_vm._s(item.index))])}),0)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c3975df8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/City.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c3975df8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./City.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./City.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./City.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c3975df8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./City.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c3975df8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/City.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}